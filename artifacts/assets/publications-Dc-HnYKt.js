import{m as It,r as f,v as t,O as D,P as Mt,S as Gt,Q as Y,G as ae,U as O,z as ge,B as he,k as fe,j as me,Y as Be,$ as _t,V,Z as We}from"./index-EJiCpkVe.js";import{c as gt,e as xe,u as ye,R as Ge,A as Zt}from"./en-O0g5YPDM.js";import{B as At,e as it,n as at,q as Ze,S as Ht,f as Ke,h as Ve,i as qe,j as be,k as kt,l as Xe,o as Je}from"./dayjs.min-BC2U5BeA.js";import{w as Qe,Z as se,e as ot,t as ta,d as Dt,b as pt,$ as Kt,a0 as oe,c as vt,p as ne,s as Tt,a1 as tt,a2 as re,a3 as ea,a4 as aa,M as sa,N as ie,O as le,Q as je,L as oa,_ as Ft,l as na,j as q,y as Nt,h as Ce,a5 as Re,g as Se,a6 as ce,a7 as ra,a8 as ia,n as la,A as ca,a9 as da,R as ua,D as pa,G as ga,E as ha,H as fa,F as ma,J as xa,S as ya,T as ba,U as ja,V as Ca,W as Ra,X as Sa,Y as va}from"./index-B2Yk2BTp.js";import{R as wa,E as Pa,D as de}from"./ErrorDisplay-DfQq9uVU.js";import{t as ve,T as Da}from"./timezone-YrwZ_CZJ.js";import"./isHostComponent-DVu5iVWx.js";function ka(e){return e.innerRadius}function Aa(e){return e.outerRadius}function La(e){return e.startAngle}function _a(e){return e.endAngle}function Ia(e){return e&&e.padAngle}function Ma(e,a,d,m,s,o,u,l){var b=d-e,x=m-a,i=u-s,y=l-o,n=y*b-i*x;if(!(n*n<ot))return n=(i*(a-o)-y*(e-s))/n,[e+n*b,a+n*x]}function Yt(e,a,d,m,s,o,u){var l=e-d,b=a-m,x=(u?o:-o)/Tt(l*l+b*b),i=x*b,y=-x*l,n=e+i,r=a+y,k=d+i,S=m+y,M=(n+k)/2,C=(r+S)/2,c=k-n,p=S-r,j=c*c+p*p,R=s-o,I=n*S-k*r,_=(p<0?-1:1)*Tt(aa(0,R*R*j-I*I)),z=(I*p-c*_)/j,T=(-I*c-p*_)/j,A=(I*p+c*_)/j,P=(-I*c+p*_)/j,v=z-M,h=T-C,L=A-M,G=P-C;return v*v+h*h>L*L+G*G&&(z=A,T=P),{cx:z,cy:T,x01:-i,y01:-y,x11:z*(s/R-1),y11:T*(s/R-1)}}function we(){var e=ka,a=Aa,d=vt(0),m=null,s=La,o=_a,u=Ia,l=null,b=Qe(x);function x(){var i,y,n=+e.apply(this,arguments),r=+a.apply(this,arguments),k=s.apply(this,arguments)-se,S=o.apply(this,arguments)-se,M=oe(S-k),C=S>k;if(l||(l=i=b()),r<n&&(y=r,r=n,n=y),!(r>ot))l.moveTo(0,0);else if(M>ta-ot)l.moveTo(r*Dt(k),r*pt(k)),l.arc(0,0,r,k,S,!C),n>ot&&(l.moveTo(n*Dt(S),n*pt(S)),l.arc(0,0,n,S,k,C));else{var c=k,p=S,j=k,R=S,I=M,_=M,z=u.apply(this,arguments)/2,T=z>ot&&(m?+m.apply(this,arguments):Tt(n*n+r*r)),A=Kt(oe(r-n)/2,+d.apply(this,arguments)),P=A,v=A,h,L;if(T>ot){var G=re(T/n*pt(z)),F=re(T/r*pt(z));(I-=G*2)>ot?(G*=C?1:-1,j+=G,R-=G):(I=0,j=R=(k+S)/2),(_-=F*2)>ot?(F*=C?1:-1,c+=F,p-=F):(_=0,c=p=(k+S)/2)}var w=r*Dt(c),$=r*pt(c),U=n*Dt(R),H=n*pt(R);if(A>ot){var X=r*Dt(p),W=r*pt(p),Z=n*Dt(j),Q=n*pt(j),nt;if(M<ne)if(nt=Ma(w,$,Z,Q,X,W,U,H)){var ht=w-nt[0],B=$-nt[1],lt=X-nt[0],rt=W-nt[1],J=1/pt(ea((ht*lt+B*rt)/(Tt(ht*ht+B*B)*Tt(lt*lt+rt*rt)))/2),st=Tt(nt[0]*nt[0]+nt[1]*nt[1]);P=Kt(A,(n-st)/(J-1)),v=Kt(A,(r-st)/(J+1))}else P=v=0}_>ot?v>ot?(h=Yt(Z,Q,w,$,r,v,C),L=Yt(X,W,U,H,r,v,C),l.moveTo(h.cx+h.x01,h.cy+h.y01),v<A?l.arc(h.cx,h.cy,v,tt(h.y01,h.x01),tt(L.y01,L.x01),!C):(l.arc(h.cx,h.cy,v,tt(h.y01,h.x01),tt(h.y11,h.x11),!C),l.arc(0,0,r,tt(h.cy+h.y11,h.cx+h.x11),tt(L.cy+L.y11,L.cx+L.x11),!C),l.arc(L.cx,L.cy,v,tt(L.y11,L.x11),tt(L.y01,L.x01),!C))):(l.moveTo(w,$),l.arc(0,0,r,c,p,!C)):l.moveTo(w,$),!(n>ot)||!(I>ot)?l.lineTo(U,H):P>ot?(h=Yt(U,H,X,W,n,-P,C),L=Yt(w,$,Z,Q,n,-P,C),l.lineTo(h.cx+h.x01,h.cy+h.y01),P<A?l.arc(h.cx,h.cy,P,tt(h.y01,h.x01),tt(L.y01,L.x01),!C):(l.arc(h.cx,h.cy,P,tt(h.y01,h.x01),tt(h.y11,h.x11),!C),l.arc(0,0,n,tt(h.cy+h.y11,h.cx+h.x11),tt(L.cy+L.y11,L.cx+L.x11),C),l.arc(L.cx,L.cy,P,tt(L.y11,L.x11),tt(L.y01,L.x01),!C))):l.arc(0,0,n,R,j,C)}if(l.closePath(),i)return l=null,i+""||null}return x.centroid=function(){var i=(+e.apply(this,arguments)+ +a.apply(this,arguments))/2,y=(+s.apply(this,arguments)+ +o.apply(this,arguments))/2-ne/2;return[Dt(y)*i,pt(y)*i]},x.innerRadius=function(i){return arguments.length?(e=typeof i=="function"?i:vt(+i),x):e},x.outerRadius=function(i){return arguments.length?(a=typeof i=="function"?i:vt(+i),x):a},x.cornerRadius=function(i){return arguments.length?(d=typeof i=="function"?i:vt(+i),x):d},x.padRadius=function(i){return arguments.length?(m=i==null?null:typeof i=="function"?i:vt(+i),x):m},x.startAngle=function(i){return arguments.length?(s=typeof i=="function"?i:vt(+i),x):s},x.endAngle=function(i){return arguments.length?(o=typeof i=="function"?i:vt(+i),x):o},x.padAngle=function(i){return arguments.length?(u=typeof i=="function"?i:vt(+i),x):u},x.context=function(i){return arguments.length?(l=i??null,x):l},x}function Lt(e,a){if(typeof e=="number")return e;if(e==="100%")return a;if(e.endsWith("%")){const d=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(d))return d*a/100}if(e.endsWith("px")){const d=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(d))return d}throw new Error(`MUI X: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}function Pe({filters:e}){const a=It(),m=new Date().toISOString().split("T")[0],s=e?.startDate||"2020-01-10",o=e?.endDate||m,u=e?.platform||"";e?.status;const l=e?.source||"",b=e?.country||"",[x,i]=f.useState([]),[y,n]=f.useState([]),[r,k]=f.useState([]),[S,M]=f.useState(!0),[C,c]=f.useState(!0),[p,j]=f.useState(!0),[R,I]=f.useState(0),[_,z]=f.useState(1),T=a.palette.primary.main,A=a.palette.error.main;f.useEffect(()=>{(async()=>{j(!0);try{const L="https://api.telemetry.staging.smswithoutborders.com/v1/",G={start_date:s,end_date:o,page:R+1,page_size:100};u&&(G.platform_name=u),l&&(G.source=l),b&&(G.country_code=b);const F=await it.get(`${L}publications`,{params:G}),w=F?.data?.publications?.data??[],$={};w.forEach(H=>{const X=H.date_created?.split("T")[0]||H.date_created,W=H.status?.toLowerCase();$[X]||($[X]={published:0,failed:0}),W==="published"?$[X].published+=1:W==="failed"&&($[X].failed+=1)});const U=Object.keys($).sort();i(U),n(U.map(H=>$[H]?.published||0)),k(U.map(H=>$[H]?.failed||0)),z(F?.data?.publications?.pagination?.total_pages||1)}catch(L){console.error("Error fetching publication chart data:",L)}finally{j(!1)}})()},[s,o,u,l,b,R]);const P={fontSize:10,fill:a.palette.text.secondary},v=h=>{I(h)};return t.jsx(t.Fragment,{children:p?t.jsx(D,{sx:{height:400,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Mt,{size:50,fullScreen:!1})}):t.jsxs(t.Fragment,{children:[t.jsxs(D,{sx:{p:2.5,pb:0},children:[t.jsxs(Gt,{direction:"row",sx:{alignItems:"center",justifyContent:"space-between"},children:[t.jsx(D,{children:t.jsx(Y,{variant:"h6",children:"Publications Over Time"})}),t.jsx(sa,{children:t.jsxs(Gt,{direction:"row",children:[t.jsx(ie,{control:t.jsx(le,{checked:S,onChange:()=>M(!S),sx:{"&.Mui-checked":{color:T},"&:hover":{backgroundColor:ae(T,.08)}}}),label:"Published"}),t.jsx(ie,{control:t.jsx(le,{checked:C,onChange:()=>c(!C),sx:{"&.Mui-checked":{color:A},"&:hover":{backgroundColor:ae(A,.08)}}}),label:"Failed"})]})})]}),t.jsx(je,{height:450,grid:{horizontal:!0},xAxis:[{data:x,scaleType:"band",tickLabelStyle:{...P,fontSize:11,fontWeight:500}}],yAxis:[{disableLine:!0,disableTicks:!0,tickLabelStyle:P}],series:[...S?[{data:y,label:"Published",color:T,type:"bar"}]:[],...C?[{data:r,label:"Failed",color:A,type:"bar"}]:[]],slotProps:{legend:{hidden:!0},bar:{rx:5,ry:5}},axisHighlight:{x:"none"},margin:{top:30,left:40,right:10,bottom:60},tooltip:{trigger:"item"},slots:{itemContent:h=>{const{itemData:L,series:G}=h,F=x[L.dataIndex],w=L.value??G.data[L.dataIndex];return t.jsxs(D,{sx:{bgcolor:"background.paper",p:1.5,border:1,borderColor:"divider",borderRadius:0,boxShadow:2},children:[t.jsx(Y,{variant:"body2",sx:{fontWeight:600,mb:.5},children:F}),t.jsxs(Y,{variant:"body2",sx:{color:G.color},children:[G.label,": ",w]})]})}},sx:{"& .MuiBarElement-root:hover":{opacity:.6},"& .MuiChartsAxis-directionX .MuiChartsAxis-tick, & .MuiChartsAxis-root line":{stroke:a.palette.divider}}})]}),t.jsxs(Gt,{direction:"row",sx:{justifyContent:"center",gap:2,mt:2},children:[t.jsxs(At,{size:"small",type:"text",disabled:R>=_-1,onClick:()=>v(R+1),children:[t.jsx(wa,{})," ",t.jsx(Y,{variant:"body2",children:"Previous"})]}),t.jsxs(Y,{variant:"body2",color:"text.primary",children:["Page ",R+1]}),t.jsxs(At,{size:"small",type:"text",disabled:R===0,onClick:()=>v(R-1),children:[t.jsx(Y,{variant:"body2",children:"Next"}),t.jsx(oa,{})]})]})]})})}Pe.propTypes={filters:O.shape({startDate:O.string,endDate:O.string,platform:O.string,status:O.string,source:O.string,country:O.string})};const za=["classes","color","cornerRadius","dataIndex","endAngle","id","innerRadius","isFaded","isHighlighted","onClick","outerRadius","paddingAngle","startAngle","highlightScope"];function Ta(e){return fe("MuiPieArc",e)}me("MuiPieArc",["root","highlighted","faded"]);const Fa=e=>{const{classes:a,id:d,isFaded:m,isHighlighted:s,dataIndex:o}=e,u={root:["root",`series-${d}`,`data-index-${o}`,s&&"highlighted",m&&"faded"]};return he(u,Ta,a)},Ea=ge(Ce.path,{name:"MuiPieArc",slot:"Root",overridesResolver:(e,a)=>a.arc})(({theme:e})=>({stroke:(e.vars||e).palette.background.paper,transition:"opacity 0.2s ease-in, fill 0.2s ease-in, filter 0.2s ease-in"}));function Oa(e){const{classes:a,color:d,cornerRadius:m,dataIndex:s,endAngle:o,id:u,innerRadius:l,isFaded:b,isHighlighted:x,onClick:i,outerRadius:y,paddingAngle:n,startAngle:r}=e,k=Ft(e,za),S={id:u,dataIndex:s,classes:a,color:d,isFaded:b,isHighlighted:x},M=Fa(S),C=na();return t.jsx(Ea,q({d:Nt([r,o,n,l,y,m],(c,p,j,R,I,_)=>we().cornerRadius(_)({padAngle:j,startAngle:c,endAngle:p,innerRadius:R,outerRadius:I})),visibility:Nt([r,o],(c,p)=>c===p?"hidden":"visible"),onClick:i,cursor:i?"pointer":"unset",ownerState:S,className:M.root,fill:S.color,opacity:S.isFaded?.3:1,filter:S.isHighlighted?"brightness(120%)":"none",strokeWidth:1,strokeLinejoin:"round"},k,C({type:"pie",seriesId:u,dataIndex:s})))}const $a={keys:e=>e.id,from:({innerRadius:e,outerRadius:a,cornerRadius:d,startAngle:m,endAngle:s,paddingAngle:o,color:u,isFaded:l})=>({innerRadius:e,outerRadius:(e+a)/2,cornerRadius:d,startAngle:(m+s)/2,endAngle:(m+s)/2,paddingAngle:o,fill:u,opacity:l?.3:1}),leave:({innerRadius:e,startAngle:a,endAngle:d})=>({innerRadius:e,outerRadius:e,startAngle:(a+d)/2,endAngle:(a+d)/2}),enter:({innerRadius:e,outerRadius:a,startAngle:d,endAngle:m})=>({innerRadius:e,outerRadius:a,startAngle:d,endAngle:m}),update:({innerRadius:e,outerRadius:a,cornerRadius:d,startAngle:m,endAngle:s,paddingAngle:o,color:u,isFaded:l})=>({innerRadius:e,outerRadius:a,cornerRadius:d,startAngle:m,endAngle:s,paddingAngle:o,fill:u,opacity:l?.3:1}),config:{tension:120,friction:14,clamp:!0}},Ha={keys:e=>e.id,from:({innerRadius:e,outerRadius:a,arcLabelRadius:d,cornerRadius:m,startAngle:s,endAngle:o,paddingAngle:u})=>({innerRadius:e,outerRadius:(e+a)/2,cornerRadius:m,arcLabelRadius:d,startAngle:(s+o)/2,endAngle:(s+o)/2,paddingAngle:u,opacity:0}),leave:({innerRadius:e,startAngle:a,endAngle:d})=>({innerRadius:e,outerRadius:e,arcLabelRadius:e,startAngle:(a+d)/2,endAngle:(a+d)/2,opacity:0}),enter:({innerRadius:e,outerRadius:a,startAngle:d,endAngle:m,arcLabelRadius:s})=>({innerRadius:e,outerRadius:a,startAngle:d,endAngle:m,arcLabelRadius:s,opacity:1}),update:({innerRadius:e,outerRadius:a,cornerRadius:d,startAngle:m,endAngle:s,paddingAngle:o,arcLabelRadius:u})=>({innerRadius:e,outerRadius:a,cornerRadius:d,startAngle:m,endAngle:s,paddingAngle:o,arcLabelRadius:u,opacity:1}),config:{tension:120,friction:14,clamp:!0}};function De(e){const{id:a,data:d,faded:m,highlighted:s,paddingAngle:o=0,innerRadius:u=0,arcLabelRadius:l,outerRadius:b,cornerRadius:x=0}=e,{isFaded:i,isHighlighted:y}=Re();return f.useMemo(()=>d.map((r,k)=>{const S={seriesId:a,dataIndex:k},M=y(S),C=!M&&i(S),c=q({additionalRadius:0},C&&m||M&&s||{}),p=Math.max(0,Math.PI*(c.paddingAngle??o)/180),j=Math.max(0,c.innerRadius??u),R=Math.max(0,c.outerRadius??b+c.additionalRadius),I=c.cornerRadius??x,_=c.arcLabelRadius??l??(j+R)/2;return q({},r,c,{isFaded:C,isHighlighted:M,paddingAngle:p,innerRadius:j,outerRadius:R,cornerRadius:I,arcLabelRadius:_})}),[x,u,b,o,l,d,m,s,i,y,a])}const Ya=["slots","slotProps","innerRadius","outerRadius","cornerRadius","paddingAngle","id","highlighted","faded","data","onItemClick","skipAnimation"];function Na(e){const{slots:a,slotProps:d,innerRadius:m=0,outerRadius:s,cornerRadius:o=0,paddingAngle:u=0,id:l,highlighted:b,faded:x={additionalRadius:-5},data:i,onItemClick:y,skipAnimation:n}=e,r=Ft(e,Ya),k=De({innerRadius:m,outerRadius:s,cornerRadius:o,paddingAngle:u,id:l,highlighted:b,faded:x,data:i}),S=Se(k,q({},$a,{immediate:n})),{highlightScope:M}=Re();if(i.length===0)return null;const C=a?.pieArc??Oa;return t.jsx("g",q({},r,{children:S(({startAngle:c,endAngle:p,paddingAngle:j,innerRadius:R,outerRadius:I,cornerRadius:_},z,T,A)=>t.jsx(C,q({startAngle:c,endAngle:p,paddingAngle:j,innerRadius:R,outerRadius:I,cornerRadius:_,id:l,color:z.color,dataIndex:A,highlightScope:M,isFaded:z.isFaded,isHighlighted:z.isHighlighted,onClick:y&&(P=>{y(P,{type:"pie",seriesId:l,dataIndex:A},z)})},d?.pieArc)))}))}const Ua=["id","classes","color","startAngle","endAngle","paddingAngle","arcLabelRadius","innerRadius","outerRadius","cornerRadius","formattedArcLabel","isHighlighted","isFaded","style"];function Ba(e){return fe("MuiPieArcLabel",e)}me("MuiPieArcLabel",["root","highlighted","faded"]);const Wa=e=>{const{classes:a,id:d,isFaded:m,isHighlighted:s}=e,o={root:["root",`series-${d}`,s&&"highlighted",m&&"faded"]};return he(o,Ba,a)},Ga=ge(Ce.text,{name:"MuiPieArcLabel",slot:"Root",overridesResolver:(e,a)=>a.root})(({theme:e})=>({fill:(e.vars||e).palette.text.primary,textAnchor:"middle",dominantBaseline:"middle",pointerEvents:"none"})),ue=(e,a)=>(d,m,s,o,u)=>{if(!e)return 0;const[l,b]=we().cornerRadius(u).centroid({padAngle:s,startAngle:d,endAngle:m,innerRadius:o,outerRadius:o});return a==="x"?l:b};function Za(e){const{id:a,classes:d,color:m,startAngle:s,endAngle:o,paddingAngle:u,arcLabelRadius:l,cornerRadius:b,formattedArcLabel:x,isHighlighted:i,isFaded:y,style:n}=e,r=Ft(e,Ua),S=Wa({id:a,classes:d,isFaded:y,isHighlighted:i});return t.jsx(Ga,q({className:S.root},r,{style:q({x:Nt([s,o,u,l,b],ue(x,"x")),y:Nt([s,o,u,l,b],ue(x,"y"))},n),children:x}))}const Ka=["arcLabel","arcLabelMinAngle","arcLabelRadius","cornerRadius","data","faded","highlighted","id","innerRadius","outerRadius","paddingAngle","skipAnimation","slotProps","slots"],Va=["startAngle","endAngle","paddingAngle","innerRadius","outerRadius","arcLabelRadius","cornerRadius"],qa=180/Math.PI;function Xa(e,a,d){if(!e||(d.endAngle-d.startAngle)*qa<a)return null;switch(e){case"label":return ce(d.label,"arc");case"value":return d.value?.toString();case"formattedValue":return d.formattedValue;default:return e(q({},d,{label:ce(d.label,"arc")}))}}function Ja(e){const{arcLabel:a,arcLabelMinAngle:d=0,arcLabelRadius:m,cornerRadius:s=0,data:o,faded:u={additionalRadius:-5},highlighted:l,id:b,innerRadius:x,outerRadius:i,paddingAngle:y=0,skipAnimation:n,slotProps:r,slots:k}=e,S=Ft(e,Ka),M=De({innerRadius:x,outerRadius:i,arcLabelRadius:m,cornerRadius:s,paddingAngle:y,id:b,highlighted:l,faded:u,data:o}),C=Se(M,q({},Ha,{immediate:n}));if(o.length===0)return null;const c=k?.pieArcLabel??Za;return t.jsx("g",q({},S,{children:C((p,j)=>{let{startAngle:R,endAngle:I,paddingAngle:_,innerRadius:z,outerRadius:T,arcLabelRadius:A,cornerRadius:P}=p,v=Ft(p,Va);return t.jsx(c,q({startAngle:R,endAngle:I,paddingAngle:_,innerRadius:z,outerRadius:T,arcLabelRadius:A,cornerRadius:P,style:v,id:b,color:j.color,isFaded:j.isFaded,isHighlighted:j.isHighlighted,formattedArcLabel:Xa(a,d,j)},r?.pieArcLabel))})}))}function pe(e,a){const{height:d,width:m}=a,{cx:s,cy:o}=e,u=Math.min(m,d)/2,l=Lt(s??"50%",m),b=Lt(o??"50%",d);return{cx:l,cy:b,availableRadius:u}}function Qa(e){const{skipAnimation:a,slots:d,slotProps:m,onItemClick:s}=e,o=ra(),{left:u,top:l,width:b,height:x}=f.useContext(ia),i=la(a);if(o===void 0)return null;const{series:y,seriesOrder:n}=o;return t.jsxs("g",{children:[n.map(r=>{const{innerRadius:k,outerRadius:S,cornerRadius:M,paddingAngle:C,data:c,cx:p,cy:j,highlighted:R,faded:I}=y[r],{cx:_,cy:z,availableRadius:T}=pe({cx:p,cy:j},{width:b,height:x}),A=Lt(S??T,T),P=Lt(k??0,T);return t.jsx("g",{transform:`translate(${u+_}, ${l+z})`,children:t.jsx(Na,{innerRadius:P,outerRadius:A,cornerRadius:M,paddingAngle:C,id:r,data:c,skipAnimation:i,highlighted:R,faded:I,onItemClick:s,slots:d,slotProps:m})},r)}),n.map(r=>{const{innerRadius:k,outerRadius:S,arcLabelRadius:M,cornerRadius:C,paddingAngle:c,arcLabel:p,arcLabelMinAngle:j,data:R,cx:I,cy:_}=y[r],{cx:z,cy:T,availableRadius:A}=pe({cx:I,cy:_},{width:b,height:x}),P=Lt(S??A,A),v=Lt(k??0,A),h=M===void 0?(P+v)/2:Lt(M,A);return t.jsx("g",{transform:`translate(${u+z}, ${l+T})`,children:t.jsx(Ja,{innerRadius:v,outerRadius:P??A,arcLabelRadius:h,cornerRadius:C,paddingAngle:c,id:r,data:R,skipAnimation:i,arcLabel:p,arcLabelMinAngle:j,slots:d,slotProps:m})},r)})]})}const ts=["xAxis","yAxis","series","width","height","margin","colors","sx","tooltip","axisHighlight","skipAnimation","legend","topAxis","leftAxis","rightAxis","bottomAxis","children","slots","slotProps","onItemClick","loading","highlightedItem","onHighlightChange","className"],es={top:5,bottom:5,left:5,right:100},as={top:5,bottom:5,left:100,right:5},ss=f.forwardRef(function(a,d){const m=ca({props:a,name:"MuiPieChart"}),{xAxis:s,yAxis:o,series:u,width:l,height:b,margin:x,colors:i,sx:y,tooltip:n={trigger:"item"},axisHighlight:r={x:"none",y:"none"},skipAnimation:k,legend:S,topAxis:M=null,leftAxis:C=null,rightAxis:c=null,bottomAxis:p=null,children:j,slots:R,slotProps:I,onItemClick:_,loading:z,highlightedItem:T,onHighlightChange:A,className:P}=m,v=Ft(m,ts),h=da(),L=q({},h?as:es,x),G=q({direction:"column",position:{vertical:"middle",horizontal:h?"left":"right"}},S);return t.jsxs(ua,q({},v,{ref:d,series:u.map(F=>q({type:"pie"},F)),width:l,height:b,margin:L,xAxis:s??[{id:pa,scaleType:"point",data:[...new Array(Math.max(...u.map(F=>F.data.length)))].map((F,w)=>w)}],yAxis:o,colors:i,sx:y,disableAxisListener:n?.trigger!=="axis"&&r?.x==="none"&&r?.y==="none",highlightedItem:T,onHighlightChange:A,className:P,skipAnimation:k,children:[t.jsx(ga,{topAxis:M,leftAxis:C,rightAxis:c,bottomAxis:p,slots:R,slotProps:I}),t.jsx(Qa,{slots:R,slotProps:I,onItemClick:_}),t.jsx(ha,{loading:z,slots:R,slotProps:I}),t.jsx(fa,q({},G,{slots:R,slotProps:I})),t.jsx(ma,q({},r)),!z&&t.jsx(xa,q({},n,{slots:R,slotProps:I})),j]}))});function ke({filters:e}){const a=It(),m=new Date().toISOString().split("T")[0],s=e?.startDate||"2020-01-10",o=e?.endDate||m,u=e?.status||"",l=e?.source||"",b=e?.country||"",[x,i]=f.useState([]),[y,n]=f.useState(!0),[r,k]=f.useState(null),S=f.useCallback(c=>{switch(c.toLowerCase()){case"gmail":return"#34A853";case"twitter":case"x":return"#242424ff";case"telegram":return"#0088CC";case"bluesky":return"#1185FE";case"mastodon":return"#6364FF";case"slack":return"#4A154B";case"email_bridge":return"#FFA726";default:return a.palette.primary.main}},[a.palette.primary.main]),M=(c,p)=>{const j=x.findIndex(R=>R.label===p.label);j!==-1&&k(r===j?null:j)},C=(c,p)=>{k(r===p.dataIndex?null:p.dataIndex)};return f.useEffect(()=>{(async()=>{n(!0);try{const p="https://api.telemetry.staging.smswithoutborders.com/v1/",j={start_date:s,end_date:o,group_by:"platform",page:1,page_size:100};u&&(j.status=u),l&&(j.source=l),b&&(j.country_code=b);const R=await it.get(`${p}publications`,{params:j}),I=R?.data?.publications?.pagination?.total_pages||1;let _=R?.data?.publications?.data??[];if(I>1){const A=[];for(let v=2;v<=I;v++)A.push(it.get(`${p}publications`,{params:{...j,page:v}}));(await Promise.all(A)).forEach(v=>{const h=v?.data?.publications?.data??[];_=[..._,...h]})}const z=_.reduce((A,P)=>{const v=P.platform_name||"Unknown";return A[v]=(A[v]||0)+1,A},{}),T=Object.entries(z).map(([A,P],v)=>({id:v,value:P,label:A,color:S(A)}));i(T)}catch(p){console.error("Error fetching platform distribution data:",p)}finally{n(!1)}})()},[s,o,u,l,b,S]),t.jsx(t.Fragment,{children:y?t.jsx(D,{sx:{height:400,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Mt,{size:30,fullScreen:!1})}):t.jsxs(D,{sx:{p:2.5},children:[t.jsx(Y,{variant:"h6",sx:{mb:2},children:"Publications by Platform"}),x.length>0?t.jsx(D,{sx:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative","& .MuiPieArc-root":{filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.15))",transition:"all 0.3s ease",opacity:c=>r!==null?.3:1},[`& .MuiPieArc-root:nth-of-type(${r!==null?r+1:0})`]:{filter:"drop-shadow(0px 4px 12px rgba(0,0,0,0.25))",transform:"scale(1.05)",opacity:1},"& .MuiPieArc-root:hover":{filter:"drop-shadow(0px 4px 12px rgba(0,0,0,0.25))",transform:"scale(1.05)",opacity:"1 !important"}},children:t.jsx(ss,{series:[{data:x,innerRadius:60,outerRadius:120,paddingAngle:2,cornerRadius:8,cx:150,cy:130}],colors:x.map(c=>c.color),height:370,margin:{top:10,bottom:80,left:10,right:10},onItemClick:C,slotProps:{legend:{direction:"row",position:{vertical:"bottom",horizontal:"middle"},padding:0,itemMarkWidth:20,itemMarkHeight:12,markGap:6,itemGap:12,labelStyle:{fontSize:12,fill:a.palette.text.primary,fontWeight:500},onItemClick:M}},sx:{"& .MuiChartsLegend-series text":{fontSize:"12px !important"},"& .MuiChartsLegend-mark":{borderRadius:"3px !important",rx:3},"& .MuiChartsLegend-series":{cursor:"pointer",transition:"all 0.2s ease",padding:"4px 8px",borderRadius:"6px","&:hover":{backgroundColor:a.palette.action.hover}}}})}):t.jsx(D,{sx:{height:320,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Y,{color:"text.secondary",children:"No data available"})})]})})}ke.propTypes={filters:O.shape({startDate:O.string,endDate:O.string,status:O.string,source:O.string,country:O.string})};gt.registerLocale(xe);const os=ya.byCountry();function Ae({filters:e,selectedCountry:a,onCountrySelect:d}){const s=It().palette.mode==="dark",[o,u]=f.useState([]),[l,b]=f.useState(!1),[x,i]=f.useState(""),[y,n]=f.useState(!1),[r,k]=f.useState(null),[S,M]=f.useState(!1),C=f.useRef(null),c=f.useRef(null),p=f.useRef([]),j=f.useRef(null),R=f.useRef(null),I=new Date().toISOString().split("T")[0],_=e?.startDate||"2020-01-10",z=e?.endDate||I,T=e?.platform||"",A=e?.status||"",P=e?.source||"",v=e?.country||"",h=f.useCallback(async()=>{b(!0),i("");try{const w={start_date:_,end_date:z,page:1,page_size:100};T&&(w.platform_name=T),A&&(w.status=A),P&&(w.source=P),v&&(w.country_code=v);const U=(await it.get("https://api.telemetry.staging.smswithoutborders.com/v1/publications",{params:w})).data.publications?.data||[];if(!U||U.length===0){u([]),i(""),b(!1);return}const H={};U.forEach(W=>{const Z=W.country_code?.toUpperCase();Z&&gt.isValid(Z,"en")&&(H[Z]||(H[Z]={countryCode:Z,country:gt.getName(Z,"en"),publications:0}),H[Z].publications+=1)});const X=Object.values(H).map(W=>{try{const Z=os.get(W.countryCode);if(Z&&Z.latitude!==void 0&&Z.longitude!==void 0)return{country:W.country,countryCode:W.countryCode,publications:W.publications,position:{lat:Z.latitude,lng:Z.longitude}}}catch(Z){console.warn(`Could not get coordinates for country code: ${W.countryCode}`,Z)}return null}).filter(W=>W!==null);u(X),i("")}catch(w){console.error("Error fetching country data:",w),console.error("Error details:",w.response?.data||w.message),i("Unable to load map data"),u([])}finally{b(!1)}},[_,z,T,A,P,v]);f.useEffect(()=>{h()},[h]),f.useEffect(()=>typeof window>"u"||!window.L||!C.current||o.length===0?void 0:((()=>{try{const $=window.L;c.current&&(c.current.remove(),c.current=null);const U=C.current;U._leaflet_id=null,U.innerHTML="";const H=$.map(U,{center:[20,0],zoom:0,minZoom:0,maxZoom:18,zoomControl:!0,attributionControl:!0,zoomAnimation:!0,fadeAnimation:!0,markerZoomAnimation:!0,scrollWheelZoom:!1,touchZoom:!1,doubleClickZoom:!1});H.zoomControl.setPosition("topleft"),c.current=H;const X=s?"#0f0f0fff":"#fafafa";U.style.backgroundColor=X,$.tileLayer(s?"https://{s}.basemaps.cartocdn.com/dark_only_labels/{z}/{x}/{y}{r}.png":"https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png",{attribution:"",subdomains:"abcd",maxZoom:20,pane:"shadowPane"}).addTo(H);const W=o.map(B=>B.publications).sort((B,lt)=>B-lt),Z=W[Math.floor(W.length/3)],Q=W[Math.floor(W.length*2/3)],nt=B=>B==null?null:B<=Z?"#C7D3FF":B<=Q?"#577BFF":"#0024A8",ht={};o.forEach(B=>{ht[B.countryCode]={publications:B.publications,country:B.country,color:nt(B.publications)}}),p.current=[],fetch("https://raw.githubusercontent.com/datasets/geo-countries/master/data/countries.geojson").then(B=>B.json()).then(B=>{const lt=$.geoJSON(B,{style:rt=>{const J=rt.properties["ISO3166-1-Alpha-2"],st=ht[J];return st?{fillColor:st.color,fillOpacity:.8,color:s?"#475569":"#d8d8d8ff",weight:1.5}:{fillColor:s?"#2d2d2d":"#e8e8e8",fillOpacity:.6,color:s?"#475569":"#cccccc",weight:1}},onEachFeature:(rt,J)=>{const st=rt.properties["ISO3166-1-Alpha-2"],ct=ht[st];ct&&(p.current.push({layer:J,color:ct.color,publications:ct.publications,countryCode:st,originalOpacity:.7}),J.bindTooltip(`<div style="text-align: start;">
                      <h3>${ct.country}</h3>
                      <span style="font-size: 11px;">${ct.publications.toLocaleString()} publications</span>
                    </div>`,{direction:"top",offset:[0,0],opacity:.95,className:"custom-tooltip"}),J.bindPopup(`<div style="min-width: 150px; padding: 4px;">
                      <strong style="font-size: 15px; color: ${ct.color};">${ct.country}</strong><br/>
                      <span style="font-size: 13px; color: #666;">Publications: <strong style="color: #333;">${ct.publications.toLocaleString()}</strong></span>
                    </div>`,{maxWidth:250,className:"custom-popup"}),J.on("click",function(){d?.(st===a?null:st)}),J.on("mouseover",function(yt){(r===null||r===ct.color)&&this.setStyle({fillOpacity:.9,weight:2,color:"#ffffff"})}),J.on("mouseout",function(){const yt=p.current.find(Ut=>Ut.layer===J);yt&&(r===null?this.setStyle({fillOpacity:yt.originalOpacity,weight:1,color:s?"#475569":"#d8d8d8ff"}):r===ct.color?this.setStyle({fillOpacity:.9,weight:1,color:s?"#475569":"#d8d8d8ff"}):this.setStyle({fillOpacity:.2,weight:1,color:s?"#475569":"#d8d8d8ff"}))}))},pane:"tilePane"}).addTo(H);if(R.current=lt,o.length>0){const rt=[];o.forEach(J=>{rt.push([J.position.lat,J.position.lng])}),H.fitBounds(rt,{padding:[10,10],maxZoom:1.4})}}).catch(B=>console.error("Error loading GeoJSON:",B)),n(!0)}catch($){console.error("Error initializing map:",$),i("Unable to initialize map")}})(),()=>{c.current&&(c.current.remove(),c.current=null)}),[o,s]),f.useEffect(()=>{n(!1)},[e]),f.useEffect(()=>{!y||p.current.length===0||p.current.forEach(({layer:w,color:$,countryCode:U,originalOpacity:H})=>{if(a&&U===a){if(w.setStyle({fillOpacity:1,weight:3,color:"#f1a35aff"}),w.openPopup(),c.current){const X=w.getBounds();c.current.fitBounds(X,{padding:[50,50],animate:!0,duration:.5})}}else a?w.setStyle({fillOpacity:.3,weight:1,color:s?"#475569":"#d8d8d8ff"}):(w.setStyle({fillOpacity:H,weight:1,color:s?"#475569":"#d8d8d8ff"}),w.closePopup())})},[a,y,s]);const L=()=>{i(""),h()},G=()=>{M(w=>!w),setTimeout(()=>{c.current&&c.current.invalidateSize()},100)};f.useEffect(()=>{const w=$=>{$.key==="Escape"&&S&&(M(!1),setTimeout(()=>{c.current&&c.current.invalidateSize()},100))};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}},[S]);const F=w=>{r===w?(k(null),p.current.forEach(({layer:$})=>{$.setStyle({fillOpacity:.7})})):(k(w),p.current.forEach(({layer:$,color:U})=>{U===w?$.setStyle({fillOpacity:.9}):$.setStyle({fillOpacity:.2})}))};return t.jsxs(t.Fragment,{children:[t.jsx("style",{children:`
          /* Tooltip styling */
          .custom-tooltip {
            background-color: ${s?"rgba(30, 41, 59, 0.95)":"rgba(255, 255, 255, 0.95)"} !important;
            border: 1px solid ${s?"#334155":"#ddd"} !important;
            border-radius: 6px !important;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3) !important;
            padding: 6px 10px !important;
            font-family: inherit !important;
            color: ${s?"#e2e8f0":"#333"} !important;
          }
          
          .custom-tooltip::before {
            border-top-color: ${s?"rgba(30, 41, 59, 0.95)":"rgba(255, 255, 255, 0.95)"} !important;
          }
          
          /* Popup styling */
          .custom-popup .leaflet-popup-content-wrapper {
            background-color: ${s?"#1e293b":"#fff"} !important;
            color: ${s?"#e2e8f0":"#333"} !important;
            border-radius: 8px !important;
            box-shadow: 0 3px 14px rgba(0,0,0,0.3) !important;
          }
          
          .custom-popup .leaflet-popup-tip {
            background-color: ${s?"#1e293b":"#fff"} !important;
            box-shadow: 0 3px 14px rgba(0,0,0,0.3) !important;
          }
          
          /* Zoom control styling */
          .leaflet-control-zoom {
            border: none !important;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3) !important;
            border-radius: 8px !important;
            overflow: hidden !important;
          }
          
          .leaflet-control-zoom a {
            background-color: ${s?"rgba(30, 41, 59, 0.95)":"rgba(255, 255, 255, 0.95)"} !important;
            border: none !important;
            color: ${s?"#e2e8f0":"#333"} !important;
            font-size: 18px !important;
            line-height: 32px !important;
            width: 32px !important;
            height: 32px !important;
          }
          
          .leaflet-control-zoom a:hover {
            background-color: ${s?"rgba(51, 65, 85, 1)":"rgba(255, 255, 255, 1)"} !important;
            color: #1976d2 !important;
          }
          
          /* Country hover transition */
          .leaflet-interactive {
            transition: fill-opacity 0.2s ease, stroke-width 0.2s ease !important;
            cursor: pointer !important;
          }
          
          .leaflet-interactive:hover {
            stroke-width: 2 !important;
          }
          
          /* Attribution styling */
          .leaflet-control-attribution {
            background-color: ${s?"rgba(30, 41, 59, 0.8)":"rgba(255, 255, 255, 0.8)"} !important;
            color: ${s?"#94a3b8":"#666"} !important;
            font-size: 10px !important;
            padding: 2px 5px !important;
          }
          
          .leaflet-control-attribution a {
            color: ${s?"#60a5fa":"#0078A8"} !important;
          }
        `}),t.jsxs(D,{ref:j,sx:{height:"100%",minHeight:{xs:"300px",sm:"400px"},width:"100%",display:"flex",flexDirection:"column",...S&&{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,borderRadius:0}},children:[l&&t.jsx(D,{display:"flex",justifyContent:"center",alignItems:"center",sx:{flex:1},children:t.jsx(Mt,{size:50,fullScreen:!1})}),!l&&x&&t.jsx(Pa,{onRetry:L,fullHeight:!0}),!l&&!x&&o.length>0&&t.jsxs(D,{sx:{position:"relative",flex:1,width:"100%",minHeight:0},children:[t.jsx(D,{ref:C,sx:{height:"100%",width:"100%"}}),t.jsx(Be,{onClick:G,sx:w=>({position:"absolute",top:{xs:8,sm:90},left:{xs:8,sm:10},backgroundColor:s?"rgba(30, 41, 59, 0.95)":"rgba(255, 255, 255, 0.95)",color:"text.primary",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:1e3,padding:{xs:"6px",sm:"8px"},"&:hover":{backgroundColor:s?"rgba(51, 65, 85, 1)":"rgba(255, 255, 255, 1)"}}),children:S?t.jsx(ba,{style:{fontSize:"18px"}}):t.jsx(ja,{style:{fontSize:"18px"}})}),t.jsxs(D,{sx:w=>({position:"absolute",bottom:{xs:10,sm:20},left:{xs:10,sm:20},backgroundColor:s?"rgba(30, 41, 59, 0.95)":"rgba(255, 255, 255, 0.95)",padding:{xs:"8px 12px",sm:"12px 16px"},borderRadius:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:1e3,maxWidth:{xs:"140px",sm:"none"}}),children:[t.jsx(Y,{variant:"subtitle2",sx:{fontWeight:600,mb:1,color:"text.primary",fontSize:{xs:"0.75rem",sm:"0.75rem"}},children:"Publications"}),t.jsx(D,{sx:{display:"flex",flexDirection:"column",gap:.75},children:[{color:"#C7D3FF",label:"Low",value:"low"},{color:"#577BFF",label:"Medium",value:"medium"},{color:"#0024A8",label:"High",value:"high"}].map(w=>t.jsxs(D,{onClick:()=>F(w.color),sx:{display:"flex",alignItems:"center",gap:1,cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s",backgroundColor:r===w.color?"rgba(0,0,0,0.08)":"transparent","&:hover":{backgroundColor:"rgba(0,0,0,0.05)"}},children:[t.jsx(D,{sx:{width:10,height:10,borderRadius:"50%",backgroundColor:w.color,border:"2px solid #ffffff",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",flexShrink:0}}),t.jsx(Y,{variant:"body2",sx:{fontSize:{xs:"0.75rem",sm:"0.75rem"},color:"text.secondary"},children:w.label})]},w.value))})]})]}),!l&&!x&&o.length===0&&t.jsx(D,{display:"flex",justifyContent:"center",alignItems:"center",sx:{flex:1},children:t.jsx(Y,{color:"text.secondary",children:"No country data available for the selected filters"})})]})]})}Ae.propTypes={filters:O.shape({startDate:O.string,endDate:O.string,platform:O.string,status:O.string,source:O.string,country:O.string}),selectedCountry:O.string,onCountrySelect:O.func};at.extend(ye);at.extend(ve);function Le({filters:e}){const a=It(),[d,m]=f.useState(!0),[s,o]=f.useState([]),[u,l]=f.useState(""),b=new Date().toISOString().split("T")[0],x=e?.startDate||"2020-01-10",i=e?.endDate||b,y=e?.platform||"",n=e?.status||"",r=e?.source||"",k=e?.country||"",S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],M=Array.from({length:24},(c,p)=>p);f.useEffect(()=>{(async()=>{m(!0),l("");try{const p="https://api.telemetry.staging.smswithoutborders.com/v1/",j={start_date:x,end_date:i,page:1,page_size:100};y&&(j.platform_name=y),n&&(j.status=n),r&&(j.source=r),k&&(j.country_code=k);const R=await it.get(`${p}publications`,{params:j}),I=R?.data?.publications?.pagination?.total_pages||1;let _=R?.data?.publications?.data??[];if(I>1){const P=[];for(let h=2;h<=I;h++)P.push(it.get(`${p}publications`,{params:{...j,page:h}}));(await Promise.all(P)).forEach(h=>{const L=h?.data?.publications?.data??[];_=[..._,...L]})}const z=Array(7).fill(null).map(()=>Array(24).fill(0));_.forEach(P=>{if(P.date_created){const v=at(P.date_created),h=v.day(),L=v.hour();z[h][L]++}});const T=Math.max(...z.flat()),A=[];for(let P=0;P<7;P++)for(let v=0;v<24;v++)A.push({day:P,hour:v,count:z[P][v],intensity:T>0?z[P][v]/T:0});o(A)}catch(p){console.error("Error fetching heatmap data:",p),l("Failed to load usage heatmap data")}finally{m(!1)}})()},[x,i,y,n,r,k]);const C=c=>{const p=a.palette.mode==="dark";return c===0?p?a.palette.grey[800]:a.palette.grey[100]:p?c<.2?a.palette.primary.darker:c<.4?a.palette.primary.dark:c<.6?a.palette.primary.main:c<.8?a.palette.primary.light:a.palette.primary.lighter:c<.2?a.palette.primary.lighter:c<.4?a.palette.primary.light:c<.6?a.palette.primary.main:c<.8?a.palette.primary.dark:a.palette.primary.darker};return d?t.jsx(_t,{children:t.jsx(D,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400,children:t.jsx(Mt,{size:50,fullScreen:!1})})}):u?t.jsx(_t,{children:t.jsx(Y,{color:"error",align:"center",children:u})}):t.jsxs(_t,{sx:{height:446,p:1},children:[t.jsx(Y,{variant:"h5",gutterBottom:!0,children:"Peak Usage Hours"}),t.jsx(Y,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Publication activity by day of week and hour of day"}),t.jsx(D,{sx:{overflowX:"auto"},children:t.jsxs(D,{sx:{minWidth:600},children:[t.jsx(D,{sx:{display:"flex",mb:1,ml:6},children:M.map(c=>t.jsx(D,{sx:{width:28,height:20,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",color:"text.secondary"},children:c},c))}),S.map((c,p)=>t.jsxs(D,{sx:{display:"flex",mb:.5,alignItems:"center"},children:[t.jsx(D,{sx:{width:40,height:24,display:"flex",alignItems:"center",justifyContent:"flex-end",pr:1,fontSize:"12px",fontWeight:500,color:"text.primary"},children:c}),M.map(j=>{const R=s.find(z=>z.day===p&&z.hour===j),I=R?.count||0,_=R?.intensity||0;return t.jsx(D,{sx:{width:24,height:24,backgroundColor:C(_),border:"1px solid",borderColor:a.palette.mode==="dark"?a.palette.grey[700]:a.palette.grey[300],borderRadius:.5,mr:.5,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s","&:hover":{transform:"scale(1.2)",zIndex:10,boxShadow:a.shadows[4],"& .count-tooltip":{display:"block"}},position:"relative"},title:`${c} ${j}:00 - ${I} publications`,children:t.jsx(D,{className:"count-tooltip",sx:{display:"none",position:"absolute",top:-30,left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0,0,0,0.8)",color:"white",padding:"4px 8px",borderRadius:1,fontSize:"11px",whiteSpace:"nowrap",zIndex:1e3},children:I})},`${p}-${j}`)})]},c)),t.jsxs(D,{sx:{mt:3,display:"flex",alignItems:"center",justifyContent:"center"},children:[t.jsx(Y,{variant:"caption",sx:{mr:2},children:"Less"}),[0,.2,.4,.6,.8,1].map((c,p)=>t.jsx(D,{sx:{width:24,height:24,backgroundColor:C(c),border:"1px solid",borderColor:a.palette.mode==="dark"?a.palette.grey[700]:a.palette.grey[300],borderRadius:.5,mr:.5}},p)),t.jsx(Y,{variant:"caption",sx:{ml:1},children:"More"})]})]})})]})}Le.propTypes={filters:O.object};const _e=async(e,a,d,m)=>{const s="https://api.telemetry.staging.smswithoutborders.com/v1/",o={start_date:e,end_date:a,page:1,page_size:100};d&&(o.source=d),m&&(o.country_code=m);const u=await it.get(`${s}publications`,{params:o}),l=u?.data?.publications?.pagination?.total_pages||1;let b=u?.data?.publications?.data??[];if(l>1){const y=[];for(let r=2;r<=l;r++)y.push(it.get(`${s}publications`,{params:{...o,page:r}}));(await Promise.all(y)).forEach(r=>{const k=r?.data?.publications?.data??[];b=[...b,...k]})}const x=b.reduce((y,n)=>{const r=n.platform_name||"Unknown",k=n.status?.toLowerCase();return y[r]||(y[r]={total:0,successful:0,failed:0}),y[r].total++,k==="published"?y[r].successful++:k==="failed"&&y[r].failed++,y},{});return Object.entries(x).map(([y,n])=>({platform:y,successRate:n.total>0?parseFloat((n.successful/n.total*100).toFixed(2)):0,total:n.total,successful:n.successful,failed:n.failed})).sort((y,n)=>n.successRate-y.successRate)};function Ie({filters:e}){const a=It(),m=new Date().toISOString().split("T")[0],s=e?.startDate||"2020-01-10",o=e?.endDate||m,u=e?.source||"",l=e?.country||"",[b,x]=f.useState([]),[i,y]=f.useState(!0);return f.useEffect(()=>{(async()=>{y(!0);try{const r=await _e(s,o,u,l);x(r)}catch(r){console.error("Error fetching platform success rate data:",r)}finally{y(!1)}})()},[s,o,u,l]),i?t.jsx(D,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:200},children:t.jsx(Mt,{size:40,fullScreen:!1})}):b.length===0?t.jsx(D,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:200},children:t.jsx(Y,{color:"text.secondary",children:"No data available"})}):t.jsx(D,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:b.map(n=>t.jsxs(D,{sx:{flex:"1 1 200px",p:2,border:"1px solid",borderColor:a.palette.divider,borderRadius:2,backgroundColor:a.palette.mode==="dark"?a.palette.grey[900]:a.palette.grey[50]},children:[t.jsx(D,{sx:{display:"flex",alignItems:"center",mb:1},children:t.jsx(Y,{variant:"subtitle2",fontWeight:"bold",children:n.platform.toUpperCase()})}),t.jsxs(Y,{variant:"h5",sx:{mb:.5},children:[n.successRate,"%"]}),t.jsxs(Y,{variant:"caption",color:"text.secondary",children:[n.successful.toLocaleString()," / ",n.total.toLocaleString()," successful"]}),n.failed>0&&t.jsxs(Y,{variant:"caption",color:"error.main",display:"block",children:[n.failed.toLocaleString()," failed"]})]},n.platform))})}Ie.propTypes={filters:O.shape({startDate:O.string,endDate:O.string,source:O.string,country:O.string})};function Me({filters:e}){const a=It(),m=new Date().toISOString().split("T")[0],s=e?.startDate||"2020-01-10",o=e?.endDate||m,u=e?.source||"",l=e?.country||"",[b,x]=f.useState([]),[i,y]=f.useState(!0);return f.useEffect(()=>{(async()=>{y(!0);try{const r=await _e(s,o,u,l);x(r)}catch(r){console.error("Error fetching platform success rate data:",r)}finally{y(!1)}})()},[s,o,u,l]),t.jsx(_t,{children:i?t.jsx(D,{sx:{height:400,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Mt,{size:50,fullScreen:!1})}):t.jsxs(D,{sx:{p:1.5},children:[t.jsx(Y,{variant:"h5",gutterBottom:!0,children:"Platform Success Rates"}),t.jsx(Y,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Percentage of successful publications by platform (higher is better)"}),b.length>0?t.jsx(t.Fragment,{children:t.jsx(D,{sx:{width:"100%",height:300},children:t.jsx(je,{dataset:b,xAxis:[{scaleType:"band",dataKey:"platform",tickLabelStyle:{angle:-45,textAnchor:"end",fontSize:12,fill:a.palette.text.primary}}],yAxis:[{label:"Success Rate (%)",min:0,max:100,tickLabelStyle:{fontSize:12,fill:a.palette.text.primary}}],series:[{dataKey:"successRate",label:"Success Rate (%)",valueFormatter:n=>`${n}%`,color:a.palette.success.main}],margin:{top:20,bottom:80,left:60,right:20},grid:{horizontal:!0},sx:{"& .MuiBarElement-root":{transition:"all 0.3s ease","&:hover":{opacity:.8}}}})})}):t.jsx(D,{sx:{height:320,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Y,{color:"text.secondary",children:"No data available"})})]})})}Me.propTypes={filters:O.shape({startDate:O.string,endDate:O.string,source:O.string,country:O.string})};at.extend(ye);at.extend(ve);at.extend(Sa);at.extend(va);gt.registerLocale(xe);const Vt=(e,a)=>a===0?e>0?100:0:((e-a)/a*100).toFixed(2),ns=[{id:"id",align:"left",label:"ID"},{id:"date",align:"left",label:"Date",orderBy:"date_created"},{id:"country",align:"left",label:"Country"},{id:"platform",align:"left",label:"Platform"},{id:"source",align:"left",label:"Source"},{id:"status",align:"left",label:"Status"}];function ze({order:e,orderBy:a,onRequestSort:d}){const m=o=>u=>{d(u,o)},s={id:"8%",date:"28%",country:"20%",platform:"18%",source:"13%",status:"13%"};return t.jsx(Je,{sx:{backgroundColor:"background.default",position:"sticky",top:0,zIndex:1},children:t.jsx(be,{children:ns.map(o=>t.jsx(kt,{align:o.align,sortDirection:a===o.id?e:!1,sx:{width:s[o.id],fontSize:"0.75rem",padding:"8px",whiteSpace:o.id==="date"?"nowrap":"normal"},children:o.orderBy?t.jsx(Da,{active:a===o.id,direction:a===o.id?e:"asc",onClick:m(o.id),children:o.label}):o.label},o.id))})})}ze.propTypes={onRequestSort:O.func.isRequired,order:O.oneOf(["asc","desc"]).isRequired,orderBy:O.string.isRequired};function gs(){const a=It().palette.mode==="dark",[d,m]=f.useState("desc"),[s,o]=f.useState("date"),[u,l]=f.useState(""),[b,x]=f.useState(""),[i,y]=f.useState(""),[n,r]=f.useState(""),[k,S]=f.useState([]),[M,C]=f.useState(null),[c,p]=f.useState(null),[j,R]=f.useState("custom"),[I,_]=f.useState(!1),[z,T]=f.useState(!1),[A,P]=f.useState(!0),[v,h]=f.useState(!1),[L,G]=f.useState(null),[F,w]=f.useState({}),[$,U]=f.useState(0),[H,X]=f.useState(10),[W,Z]=f.useState(0),[Q,nt]=f.useState({totalPublication:0,totalPublished:0,totalFailed:0,percentages:{totalPublication:0,totalPublished:0,totalFailed:0},isHigher:{totalPublication:!0,totalPublished:!0,totalFailed:!0}}),[ht,B]=f.useState([]),[lt,rt]=f.useState(null),J=(g,E)=>{const ut=s===E&&d==="asc";m(ut?"desc":"asc"),o(E),w(K=>({...K,sort_by:E,sort_order:ut?"desc":"asc"}))},st=new Date().toISOString().split("T")[0],ct=()=>{const g={platform:u,startDate:M?at(M).format("YYYY-MM-DD"):"2020-01-10",endDate:c?at(c).format("YYYY-MM-DD"):st,status:b,source:i,country:n};w(g),U(0)},yt=({key:g})=>{R(g);const E=at();switch(g){case"last24hours":C(E),p(E),_(!1),T(!1);break;case"last7days":C(E.subtract(7,"day")),p(E),_(!1),T(!1);break;case"thismonth":C(E.startOf("month")),p(E),_(!1),T(!1);break;case"custom":_(!0);break}},Ut=()=>{const g=a?"#1e293b":"#fff",E=a?"#334155":"#f5f5f5",ut=a?"#334155":"#f0f0f0",K=a?"#e2e8f0":"#333",bt=a?"#94a3b8":"#666";return t.jsxs("div",{style:{padding:"12px",minWidth:"300px",backgroundColor:g,borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:[t.jsx("div",{style:{cursor:"pointer",padding:"8px 12px",borderRadius:"4px",color:K},onMouseEnter:N=>N.target.style.backgroundColor=E,onMouseLeave:N=>N.target.style.backgroundColor="transparent",onClick:()=>yt({key:"last24hours"}),children:"Today"}),t.jsx("div",{style:{cursor:"pointer",padding:"8px 12px",borderRadius:"4px",color:K},onMouseEnter:N=>N.target.style.backgroundColor=E,onMouseLeave:N=>N.target.style.backgroundColor="transparent",onClick:()=>yt({key:"last7days"}),children:"Last 7 Days"}),t.jsx("div",{style:{cursor:"pointer",padding:"8px 12px",borderRadius:"4px",color:K},onMouseEnter:N=>N.target.style.backgroundColor=E,onMouseLeave:N=>N.target.style.backgroundColor="transparent",onClick:()=>yt({key:"thismonth"}),children:"This Month"}),t.jsx("div",{style:{cursor:"pointer",padding:"8px 12px",borderRadius:"4px",color:K},onMouseEnter:N=>N.target.style.backgroundColor=E,onMouseLeave:N=>N.target.style.backgroundColor="transparent",onClick:()=>yt({key:"custom"}),children:"Custom"}),I&&t.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:`1px solid ${ut}`},children:[t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"12px",color:bt},children:"Start Date"}),t.jsx(de,{placeholder:"Start Date",value:M,onChange:N=>C(N),style:{width:"100%"},format:"YYYY-MM-DD"})]}),t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"12px",color:bt},children:"End Date"}),t.jsx(de,{placeholder:"End Date",value:c,onChange:N=>p(N),style:{width:"100%"},format:"YYYY-MM-DD"})]}),t.jsx(At,{type:"primary",style:{width:"100%"},onClick:()=>{T(!1)},children:"Done"})]})]})},Te=()=>{switch(j){case"last24hours":return"Today";case"last7days":return"Last 7 Days";case"thismonth":return"This Month";case"custom":return M&&c?`${M.format("YYYY-MM-DD")} - ${c.format("YYYY-MM-DD")}`:"2020-01-10 - Today";default:return"Date Range Filter"}},Fe=()=>{l(""),x(""),y(""),r(""),C(null),p(null),R("custom"),_(!1),w({})},Ee=async()=>{h(!0);try{const g="https://api.telemetry.staging.smswithoutborders.com/v1/",E=F.startDate||"2020-01-10",ut=F.endDate||st,K={start_date:E,end_date:ut,page:1,page_size:100};F.platform&&(K.platform_name=F.platform),F.status&&(K.status=F.status),F.source&&(K.source=F.source),F.country&&(K.country_code=F.country);const bt=await it.get(`${g}publications`,{params:K}),N=bt?.data?.publications?.pagination?.total_pages||1;let et=bt?.data?.publications?.data??[];if(N>1){const zt=[];for(let Ct=2;Ct<=N;Ct++)zt.push(it.get(`${g}publications`,{params:{...K,page:Ct}}));(await Promise.all(zt)).forEach(Ct=>{const Et=Ct?.data?.publications?.data??[];et=[...et,...Et]})}const dt={metadata:{exportDate:new Date().toISOString(),totalRecords:et.length,filters:{platform:F.platform||"All",status:F.status||"All",source:F.source||"All",country:F.country||"All",startDate:E,endDate:ut}},publications:et},ft=JSON.stringify(dt,null,2),mt=new Blob([ft],{type:"application/json"}),jt=window.URL.createObjectURL(mt),wt=document.createElement("a");wt.href=jt;const $t=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);wt.download=`publications-data-${$t}.json`,document.body.appendChild(wt),wt.click(),document.body.removeChild(wt),window.URL.revokeObjectURL(jt)}catch(g){console.error("Error downloading publications data:",g),alert("Failed to download data. Please try again.")}finally{h(!1)}},Oe=(g,E)=>U(E),$e=g=>{X(parseInt(g.target.value,10)),U(0)},qt=g=>g?g.toUpperCase().replace(/./g,E=>String.fromCodePoint(127397+E.charCodeAt())):"",He=g=>at.utc(g).local().format("MMM DD, YYYY hh:mm:ss A"),Ye=g=>{switch(g?.toLowerCase()){case"telegram":return"/telegram.png";case"twitter":case"x":return"/x-twitter-brands-solid.svg";case"gmail":return"/Gmail_icon.svg";case"bluesky":return"/Bluesky_Logo.svg";case"mastodon":return"/mastodon.svg";case"slack":return"/slack.png";case"email_bridge":case"email bridge":return"/logo.svg";default:return"/logo.svg"}},Ne=g=>g?g.toLowerCase()==="email_bridge"?"EMAIL BRIDGE":g.split("_").map(E=>E.charAt(0).toUpperCase()+E.slice(1).toLowerCase()).join(" "):"";return f.useEffect(()=>{(async()=>{P(!0);try{const E=M?at(M).format("YYYY-MM-DD"):"2020-01-10",ut=c?at(c).format("YYYY-MM-DD"):st,K=at(E),N=at(ut).diff(K,"day"),et=K.subtract(N+1,"day").format("YYYY-MM-DD"),dt=K.subtract(1,"day").format("YYYY-MM-DD"),ft={start_date:E,end_date:ut,page:$+1,page_size:H},mt={start_date:et,end_date:dt,page:1,page_size:H};u&&(ft.platform_name=u,mt.platform_name=u),b&&(ft.status=b,mt.status=b),i&&(ft.source=i,mt.source=i),n&&(ft.country_code=n,mt.country_code=n);const[jt,wt]=await Promise.all([it.get("https://api.telemetry.staging.smswithoutborders.com/v1/publications",{params:ft}),it.get("https://api.telemetry.staging.smswithoutborders.com/v1/publications",{params:mt})]),$t=jt.data.publications?.data||[],zt=wt.data.publications||{};let Ct=[...Array.isArray($t)?$t.map(Rt=>{const St=Rt?.country_code?.toUpperCase()||"UNKNOWN",Ot=gt.isValid(St,"en")?gt.getName(St,"en"):"Unknown",xt=gt.isValid(St,"en")?qt(St):"";return{country:Ot||St,flag:xt||"",country_code:St,id:Rt.id,date_created:Rt.date_created,platform_name:Rt.platform_name,source:Rt.source,status:Rt.status}}):[]];s&&Ct.sort((Rt,St)=>{const Ot=d==="asc",xt=Rt[s],Pt=St[s];if(s==="date_created"){const te=new Date(xt),ee=new Date(Pt);return Ot?te.getTime()-ee.getTime():ee.getTime()-te.getTime()}return typeof xt=="string"&&typeof Pt=="string"?Ot?xt.localeCompare(Pt):Pt.localeCompare(xt):typeof xt=="number"&&typeof Pt=="number"?Ot?xt-Pt:Pt-xt:0});const Et=jt.data.publications?.total_publications||0,Bt=jt.data.publications?.total_published||0,Wt=jt.data.publications?.total_failed||0,Xt=zt.total_publications||0,Jt=zt.total_published||0,Qt=zt.total_failed||0;nt({totalPublication:Et,totalPublished:Bt,totalFailed:Wt,percentages:{totalPublication:Vt(Et,Xt),totalPublished:Vt(Bt,Jt),totalFailed:Vt(Wt,Qt)},isHigher:{totalPublication:Et>=Xt,totalPublished:Bt>=Jt,totalFailed:Wt>=Qt}}),B(Ct),Z(jt.data.publications?.pagination?.total_records||0),G(null)}catch(E){console.error("Error fetching metrics:",E),G("Failed to fetch metrics. Please try again later.")}finally{P(!1)}})()},[F,$,H,d,s]),f.useEffect(()=>{(async()=>{try{const E={start_date:"2020-01-10",end_date:new Date().toISOString().split("T")[0],page:1,page_size:100},K=(await it.get("https://api.telemetry.staging.smswithoutborders.com/v1/publications",{params:E})).data.publications?.data||[],bt=Array.isArray(K)?K.map(et=>{const dt=et?.country_code?.toUpperCase()||"UNKNOWN",ft=gt.isValid(dt,"en")?gt.getName(dt,"en"):"Unknown",mt=gt.isValid(dt,"en")?qt(dt):"";return{country:ft||dt,flag:mt||"",country_code:dt}}):[],N=[...new Map(bt.map(et=>[et.country_code,et])).values()].filter(et=>et.country_code!=="UNKNOWN").sort((et,dt)=>et.country.localeCompare(dt.country));S(N)}catch(E){console.error("Error fetching countries:",E)}})()},[]),t.jsxs(V,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[t.jsx(V,{size:12,children:t.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(Y,{variant:"h5",children:"Publications"}),t.jsx(At,{type:"default",icon:t.jsx(Ge,{}),onClick:Ee,loading:v,disabled:v,children:v?"Downloading...":"Download Data"})]})}),t.jsx(V,{size:{xs:12,sm:6,md:2},children:t.jsx(Zt,{title:"Publications",count:Q.totalPublication.toLocaleString(),percentage:Q.totalPublication===0?null:Q.percentages.totalPublication,isLoss:!Q.isHigher.totalPublication,extra:"All Publications"})}),t.jsx(V,{size:{xs:12,sm:6,md:2},children:t.jsx(Zt,{title:"Published",count:Q.totalPublished.toLocaleString(),percentage:Q.totalPublished===0?null:Q.percentages.totalPublished,isLoss:!Q.isHigher.totalPublished,extra:"Successful Publications"})}),t.jsx(V,{size:{xs:12,sm:6,md:2},children:t.jsx(Zt,{title:"Failed",count:Q.totalFailed.toLocaleString(),isLoss:Q.isHigher.totalFailed,extra:"Failed Publications"})}),t.jsx(V,{size:12,children:t.jsx(D,{children:t.jsxs(Ze,{wrap:!0,size:"middle",children:[t.jsx(Ht,{placeholder:"Platform",value:u||void 0,onChange:g=>l(g||""),style:{width:200},allowClear:!0,options:[{value:"gmail",label:t.jsxs(D,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx("img",{src:"/Gmail_icon.svg",alt:"Gmail",style:{width:16,height:16,objectFit:"contain"}}),t.jsx("span",{children:"Gmail"})]})},{value:"twitter",label:t.jsxs(D,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx("img",{src:"/x-twitter-brands-solid.svg",alt:"Twitter",style:{width:16,height:16,objectFit:"contain",filter:a?"brightness(0) invert(1)":"none"}}),t.jsx("span",{children:"Twitter"})]})},{value:"telegram",label:t.jsxs(D,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx("img",{src:"/telegram.png",alt:"Telegram",style:{width:16,height:16,objectFit:"contain"}}),t.jsx("span",{children:"Telegram"})]})},{value:"bluesky",label:t.jsxs(D,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx("img",{src:"/Bluesky_Logo.svg",alt:"Bluesky",style:{width:16,height:16,objectFit:"contain"}}),t.jsx("span",{children:"Bluesky"})]})},{value:"mastodon",label:t.jsxs(D,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx("img",{src:"/mastodon.svg",alt:"Mastodon",style:{width:16,height:16,objectFit:"contain"}}),t.jsx("span",{children:"Mastodon"})]})},{value:"email_bridge",label:t.jsxs(D,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx("img",{src:"/logo.svg",alt:"Email Bridge",style:{width:16,height:16,objectFit:"contain"}}),t.jsx("span",{children:"Email Bridge"})]})}]}),t.jsx(Ht,{placeholder:"Status",value:b||void 0,onChange:g=>x(g||""),style:{width:150},allowClear:!0,options:[{value:"published",label:"Published"},{value:"failed",label:"Failed"}]}),t.jsx(Ht,{placeholder:"Source",value:i||void 0,onChange:g=>y(g||""),style:{width:150},allowClear:!0,options:[{value:"platforms",label:"Platform"},{value:"bridges",label:"Bridge"}]}),t.jsx(Ht,{placeholder:"Country",value:n||void 0,onChange:g=>r(g||""),style:{width:200},allowClear:!0,showSearch:!0,filterOption:(g,E)=>(E?.label?.props?.children?.[1]?.props?.children||"").toLowerCase().includes(g.toLowerCase()),options:k.map(g=>({value:g.country_code,label:t.jsxs(D,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx("span",{children:g.flag}),t.jsx("span",{children:g.country})]})}))}),t.jsx(Ca,{popupRender:()=>Ut(),trigger:["click"],open:z,onOpenChange:g=>{T(g),g||_(!1)},children:t.jsx(At,{style:{width:200},type:"default",icon:t.jsx(Ra,{}),children:Te()})}),t.jsx(At,{type:"primary",onClick:ct,children:"Apply"}),t.jsx(At,{type:"text",icon:t.jsx(We,{}),onClick:Fe,children:"Reset"})]})})}),t.jsx(V,{size:12,children:t.jsx(_t,{children:t.jsxs(V,{container:!0,spacing:3,children:[t.jsxs(V,{size:{xs:12,md:7,lg:7.5},children:[t.jsx(Ke,{sx:{minHeight:400,maxHeight:400},children:A?t.jsx(D,{display:"flex",justifyContent:"center",p:4,children:t.jsx(Mt,{size:40,fullScreen:!1})}):L?t.jsx(D,{display:"flex",justifyContent:"center",p:4,children:t.jsx(Y,{color:"error",children:L})}):t.jsxs(Ve,{children:[t.jsx(ze,{order:d,orderBy:s,onRequestSort:J}),t.jsx(qe,{children:ht.map(g=>t.jsxs(be,{children:[t.jsx(kt,{sx:{width:"8%",fontSize:"0.80rem",padding:"8px"},children:g.id}),t.jsx(kt,{sx:{width:"8%",fontSize:"0.80rem",padding:"8px",whiteSpace:"nowrap"},children:He(g.date_created)}),t.jsxs(kt,{onClick:()=>{g.country_code&&g.country_code!=="UNKNOWN"&&rt(lt===g.country_code?null:g.country_code)},sx:{width:"28%",fontSize:"0.85rem",padding:"8px",cursor:g.country_code&&g.country_code!=="UNKNOWN"?"pointer":"default","&:hover":{backgroundColor:g.country_code&&g.country_code!=="UNKNOWN"?"action.hover":"transparent"},fontWeight:lt===g.country_code?"bold":"normal",color:lt===g.country_code?"primary.main":"inherit"},children:[t.jsx("span",{style:{marginRight:8},children:g.flag}),g.country?g.country:"No Country"]}),t.jsx(kt,{sx:{width:"18%",fontSize:"0.75rem",padding:"8px"},children:t.jsxs(D,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx("img",{src:Ye(g.platform_name),alt:g.platform_name,style:{width:18,height:18,objectFit:"contain",filter:a&&(g.platform_name?.toLowerCase()==="twitter"||g.platform_name?.toLowerCase()==="x")?"brightness(0) invert(1)":"none"}}),t.jsx("span",{children:Ne(g.platform_name).toUpperCase()})]})}),t.jsx(kt,{sx:{width:"13%",fontSize:"0.75rem",padding:"8px"},children:g.source.toUpperCase()}),t.jsx(kt,{sx:{width:"13%",fontSize:"0.75rem",padding:"8px"},children:g.status.toUpperCase()})]},g.id))})]})}),t.jsx(Xe,{component:"div",count:W,page:$,onPageChange:Oe,rowsPerPage:H,onRowsPerPageChange:$e})]}),t.jsx(V,{size:{xs:12,md:5,lg:4.5},children:t.jsx(Ae,{filters:F,selectedCountry:lt,onCountrySelect:rt})})]})})}),t.jsx(V,{size:12,children:t.jsx(_t,{children:t.jsxs(V,{container:!0,spacing:3,children:[t.jsx(V,{size:{xs:12,md:8},children:t.jsx(Pe,{filters:F})}),t.jsx(V,{size:{xs:12,md:4},children:t.jsx(ke,{filters:F})})]})})}),t.jsx(V,{size:12,children:t.jsxs(V,{container:!0,spacing:3,children:[t.jsx(V,{size:{xs:12,md:6},children:t.jsx(Le,{filters:F})}),t.jsx(V,{size:{xs:12,md:6},children:t.jsx(Me,{filters:F})})]})}),t.jsx(V,{size:12,children:t.jsxs(_t,{children:[t.jsx(Y,{variant:"h5",gutterBottom:!0,children:"Platform Performance Summary"}),t.jsx(Y,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Detailed success metrics by platform"}),t.jsx(Ie,{filters:F})]})})]})}export{gs as default};
